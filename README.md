# TreelStudios

**Demo backend for an iGaming provider**, built with **.NET Aspire**.  
The project demonstrates a minimal architecture to orchestrate game services (Crash, Slots) and expose APIs, data models, and real-time messaging with **SignalR**.
** Readme generated BY AI**
---

## ‚ú® Objectives

- Showcase of **.NET Aspire Orchestrator** to run games as micro-services.  
- **Minimal provider backend**: Crash API, Gunslinger API, orchestrated via Aspire.  
- Integration of a **SignalR Hub** and shared data models for event exchange.  
- Quick local setup with **Docker Compose**.  

---

## üß± Solution Structure

- **TreelStudios.sln** ‚Äì main Aspire solution.  
- **TreelStudios.AppHost / TreelStudios.ServiceDefaults** ‚Äì shell & shared defaults for services.  
- **Treel.Orchestrator.AppHost / Treel.Orchestrator.ServiceDefaults** ‚Äì orchestrator for managing services.  
- **Treel.Games.CrashApi** ‚Äì demo API for the *Crash* game.  
- **Treel.Games.GunslingerApi** ‚Äì demo API for a *slots* game.  
- **Cox.SignalRHub / Cox.SignalRDataModel** ‚Äì real-time hub + message contracts.  
- **Treel.DataModel / Treel.Dashboard.DataModel / TreelGamesDataModel** ‚Äì shared DTO models.  
- **DatabaseContext** ‚Äì database context.  
- **VolatilTreels.Api / VolatilTreels.Dashboard** ‚Äì demo API & dashboard for monitoring/testing.  
- **.container/treel-db** ‚Äì database container artifacts.  
- **docker-compose.yml** ‚Äì multi-service composition for local run.  

---

## üõ†Ô∏è Tech stack

- **.NET Aspire** (Web API, orchestrator, hosting)  
- **C#**  
- **SignalR** for real-time (game events, broadcast)  
- **Entity Framework / DatabaseContext**  
- **Docker & docker-compose** for local run  

---

## üîê Data Security

The project includes security mechanisms for data integrity and message validation.

### HMAC-SHA256

An implemented example is **HMAC-SHA256**, used to sign and validate messages between services.

```csharp
private static string CreateHmacSha256(string secret, string data)
{
    var encoding = new UTF8Encoding();
    var keyBytes = encoding.GetBytes(secret);

    using (var hmacsha256 = new HMACSHA256(keyBytes))
    {
        var hashBytes = hmacsha256.ComputeHash(encoding.GetBytes(data));
        return BitConverter.ToString(hashBytes).Replace("-", "").ToLower();
    }
}
```

This ensures:  
- detection of unauthorized data modifications,  
- identity validation via `secret`,  
- protection against replay/spoofing attacks.  

---

## ‚ñ∂Ô∏è Quick Start

### 1) Prerequisites
- .NET 8 SDK  
- Docker Desktop (or compatible)  
- (optional) Node.js for dashboard UI  

### 2) Clone & Build
```bash
git clone https://github.com/C0X3D/TreelStudios.git
cd TreelStudios
dotnet build
```

### 3) Run with Docker Compose
```bash
docker compose up --build
```

---

## üß© Architectural Flow

1. **Orchestrator** (Aspire) runs games as separate processes/APIs.  
2. **Games** expose REST endpoints for round, cashout, results.  
3. **SignalR Hub** pushes real-time events to clients (UI, dashboards).  
4. **DataModel/DatabaseContext** handles scoring, rounds, and players.  
5. **Dashboard** consumes APIs and events for monitoring and testing.  

---

## üó∫Ô∏è Roadmap

- Abstract `IGameService` for unified lifecycle.  
- Health checks and observability.  
- JWT Auth to protect endpoints.  
- Messaging with RabbitMQ/Kafka for decoupling.  
- Helm charts for cloud deployment.  

---

## üìÑ License

This is a **demo/proof-of-concept** project. You can freely use the code for inspiration.  
